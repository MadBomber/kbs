<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 420">
  <defs>
    <style>
      .box { fill: #1e293b; stroke: #60a5fa; stroke-width: 2; }
      .text { fill: #e2e8f0; font-family: 'Courier New', monospace; font-size: 14px; }
      .title { fill: #60a5fa; font-family: 'Courier New', monospace; font-size: 12px; font-weight: bold; }
      .arrow { stroke: #60a5fa; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .code { fill: #94a3b8; font-family: 'Courier New', monospace; font-size: 11px; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#60a5fa" />
    </marker>
  </defs>

  <!-- Step 1: Add Facts -->
  <rect x="50" y="20" width="400" height="60" rx="5" class="box"/>
  <text x="250" y="40" text-anchor="middle" class="title">1. ADD FACTS</text>
  <text x="250" y="62" text-anchor="middle" class="code">kb.fact :temperature, value: 85</text>

  <!-- Arrow 1 -->
  <path d="M 250 80 L 250 110" class="arrow"/>

  <!-- Step 2: Pattern Matching -->
  <rect x="50" y="110" width="400" height="60" rx="5" class="box"/>
  <text x="250" y="130" text-anchor="middle" class="title">2. PATTERN MATCHING</text>
  <text x="250" y="152" text-anchor="middle" class="code">RETE network finds matching rules</text>

  <!-- Arrow 2 -->
  <path d="M 250 170 L 250 200" class="arrow"/>

  <!-- Step 3: Fire Rules -->
  <rect x="50" y="200" width="400" height="60" rx="5" class="box"/>
  <text x="250" y="220" text-anchor="middle" class="title">3. FIRE RULES</text>
  <text x="250" y="242" text-anchor="middle" class="code">Execute actions for complete matches</text>

  <!-- Arrow 3 -->
  <path d="M 250 260 L 250 290" class="arrow"/>

  <!-- Step 4: Actions May Add/Remove Facts -->
  <rect x="50" y="290" width="400" height="80" rx="5" class="box"/>
  <text x="250" y="310" text-anchor="middle" class="title">4. ACTIONS MAY ADD/REMOVE FACTS</text>
  <text x="250" y="332" text-anchor="middle" class="code">Cycle continues until no rules fire</text>

  <!-- Feedback arrow -->
  <path d="M 450 320 L 480 320 L 480 50 L 460 50" class="arrow"/>
  <text x="485" y="185" class="text" font-size="11">â†»</text>
</svg>
