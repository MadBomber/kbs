<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 700" style="background: transparent;">
  <defs>
    <style>
      .title { font: bold 16px monospace; fill: #e0e0e0; }
      .node-title { font: bold 12px monospace; fill: #bb86fc; }
      .label { font: 11px monospace; fill: #e0e0e0; }
      .beta-box { fill: #2d3d4d; stroke: #03dac6; stroke-width: 2; }
      .alpha-box { fill: #3d2d4d; stroke: #bb86fc; stroke-width: 2; }
      .join-box { fill: #2d4d3d; stroke: #4daf50; stroke-width: 2; }
      .neg-box { fill: #4d2d2d; stroke: #cf6679; stroke-width: 2; }
      .prod-box { fill: #4d4d2d; stroke: #ffa500; stroke-width: 2; }
      .arrow { stroke: #bb86fc; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-beta { stroke: #03dac6; stroke-width: 2; fill: none; marker-end: url(#arrowhead-beta); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#bb86fc" />
    </marker>
    <marker id="arrowhead-beta" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#03dac6" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="300" y="30" class="title" text-anchor="middle">Compiled RETE Network</text>
  <text x="300" y="50" class="label" text-anchor="middle" style="font-style: italic; fill: #888;">Example rule with negation</text>

  <!-- Root Beta Memory -->
  <rect x="200" y="80" width="200" height="50" class="beta-box" rx="5"/>
  <text x="300" y="105" class="node-title" text-anchor="middle">Root Beta Memory</text>
  <text x="300" y="120" class="label" text-anchor="middle">(dummy token)</text>

  <!-- Arrow from root to join -->
  <path d="M 250 130 L 250 180" class="arrow-beta"/>

  <!-- AlphaMemory(stock) on right -->
  <rect x="420" y="150" width="150" height="60" class="alpha-box" rx="5"/>
  <text x="495" y="175" class="node-title" text-anchor="middle">AlphaMemory</text>
  <text x="495" y="195" class="label" text-anchor="middle">:stock</text>

  <!-- Arrow from alpha to join -->
  <path d="M 420 180 L 310 200" class="arrow"/>

  <!-- JoinNode1 -->
  <rect x="200" y="180" width="110" height="50" class="join-box" rx="5"/>
  <text x="255" y="205" class="node-title" text-anchor="middle">JoinNode1</text>
  <text x="255" y="220" class="label" text-anchor="middle">test: ?sym</text>

  <!-- Arrow from join to beta1 -->
  <path d="M 255 230 L 255 270" class="arrow-beta"/>

  <!-- BetaMemory1 -->
  <rect x="180" y="270" width="150" height="50" class="beta-box" rx="5"/>
  <text x="255" y="295" class="node-title" text-anchor="middle">BetaMemory1</text>
  <text x="255" y="310" class="label" text-anchor="middle">(stock tokens)</text>

  <!-- Arrow from beta1 to negation -->
  <path d="M 255 320 L 255 370" class="arrow-beta"/>

  <!-- AlphaMemory(alert) on right -->
  <rect x="420" y="350" width="150" height="60" class="alpha-box" rx="5"/>
  <text x="495" y="375" class="node-title" text-anchor="middle">AlphaMemory</text>
  <text x="495" y="395" class="label" text-anchor="middle">:alert</text>

  <!-- Arrow from alpha alert to negation -->
  <path d="M 420 380 L 340 390" class="arrow"/>

  <!-- NegationNode -->
  <rect x="170" y="370" width="170" height="50" class="neg-box" rx="5"/>
  <text x="255" y="395" class="node-title" text-anchor="middle">NegationNode</text>
  <text x="255" y="410" class="label" text-anchor="middle">NOT :alert, test: ?sym</text>

  <!-- Arrow from negation to beta2 -->
  <path d="M 255 420 L 255 460" class="arrow-beta"/>

  <!-- BetaMemory2 (implicit) -->
  <rect x="180" y="460" width="150" height="50" class="beta-box" rx="5"/>
  <text x="255" y="485" class="node-title" text-anchor="middle">BetaMemory2</text>
  <text x="255" y="500" class="label" text-anchor="middle">(matched tokens)</text>

  <!-- Arrow from beta2 to production -->
  <path d="M 255 510 L 255 560" class="arrow"/>

  <!-- ProductionNode -->
  <rect x="160" y="560" width="190" height="70" class="prod-box" rx="5"/>
  <text x="255" y="590" class="node-title" text-anchor="middle">ProductionNode</text>
  <text x="255" y="610" class="label" text-anchor="middle">Rule: "example"</text>
  <text x="255" y="625" class="label" text-anchor="middle">Action: print ?sym</text>

  <!-- Legend -->
  <text x="50" y="670" class="label" style="font-size: 10px;">Legend:</text>
  <rect x="120" y="655" width="40" height="20" class="beta-box" rx="2"/>
  <text x="165" y="670" class="label" style="font-size: 10px;">Beta</text>
  <rect x="210" y="655" width="40" height="20" class="alpha-box" rx="2"/>
  <text x="255" y="670" class="label" style="font-size: 10px;">Alpha</text>
  <rect x="300" y="655" width="40" height="20" class="join-box" rx="2"/>
  <text x="345" y="670" class="label" style="font-size: 10px;">Join</text>
  <rect x="385" y="655" width="40" height="20" class="neg-box" rx="2"/>
  <text x="430" y="670" class="label" style="font-size: 10px;">Negation</text>
  <rect x="480" y="655" width="40" height="20" class="prod-box" rx="2"/>
  <text x="525" y="670" class="label" style="font-size: 10px;">Production</text>
</svg>
